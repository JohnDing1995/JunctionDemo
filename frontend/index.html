<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <title>| MobilePay</title>
  <link href="logo.png" rel="icon" type="image/gif">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <link rel="stylesheet" href="styles.css">

  <style media="screen">

    .body {
      background-color: #504678;
    }

    .content {
      background-color: #504678;
      position: absolute;
      top: 160px;
      width: 100%;
      height: 70%;
      color: white;
    }
  </style>
</head>
<body>
  <div id="react_zBY8iuqhEObHw71y6cXw"><div class="topMenu--3k0D_" data-reactroot="" data-reactid="1" data-react-checksum="703067383"><div class="background--1TEjW" data-reactid="2"></div><!-- react-empty: 3 --><div class="container--1F9cV" data-reactid="4"><div class="row--1OhYW" data-reactid="5"><div class="col--3a52h" data-reactid="6"><div class="root--123uX" data-reactid="7"><div class="menu-logo--IAwfw" data-reactid="8"><div class="logo--2HtPg" data-reactid="9"><a href="/" data-reactid="10"><svg version="1.1" viewBox="0 0 133.5 23.5" data-reactid="11"><g data-reactid="12"><path fill="#5A78FF" d="M0,17.9L5.3,1.2c0.1-0.2,0.3-0.4,0.5-0.4h2.7C8.7,0.8,8.9,1,9,1.2l4.1,10.5c0.1,0.2,0.3,0.2,0.4,0l4.1-10.5c0.1-0.2,0.3-0.4,0.5-0.4h2.7c0.2,0,0.4,0.2,0.5,0.4l5.2,16.7c0.1,0.3-0.1,0.6-0.4,0.6h-3.1c-0.3,0-0.4-0.2-0.5-0.4L19,7.2C19,7,18.7,7,18.7,7.2l-4,10.8c-0.1,0.3-0.3,0.4-0.6,0.4h-1.8c-0.3,0-0.4-0.2-0.5-0.4L7.7,7.2C7.6,7,7.4,7,7.3,7.2L3.9,18.1c-0.1,0.3-0.3,0.4-0.5,0.4h-3C0.1,18.4-0.1,18.2,0,17.9z" data-reactid="13"></path><path fill="#5A78FF" d="M27.4,11.9c0-3.9,3-6.9,7-6.9c4,0,7,3,7,6.9c0,3.8-2.9,6.9-7,6.9C30.4,18.8,27.4,15.8,27.4,11.9zM37.8,11.9c0-2-1.5-3.6-3.4-3.6c-1.9,0-3.4,1.6-3.4,3.6c0,2,1.6,3.6,3.4,3.6C36.3,15.5,37.8,13.9,37.8,11.9z" data-reactid="14"></path><path fill="#5A78FF" d="M47.6,17.4c-0.3-0.2-0.5-0.1-0.5,0.2v0.3c0,0.3-0.2,0.5-0.5,0.5h-2.4c-0.3,0-0.5-0.2-0.5-0.5V1.2c0-0.3,0.2-0.5,0.5-0.5h2.6c0.3,0,0.5,0.2,0.5,0.5V6c0,0.3,0.2,0.4,0.6,0.2C48.6,5.6,49.7,5,51.2,5c3.6,0,6.3,3,6.3,6.9c0,3.8-2.8,6.9-6.4,6.9C49.6,18.8,48.5,18.1,47.6,17.4z M54,11.9c0-2-1.5-3.6-3.5-3.6c-1.9,0-3.4,1.6-3.4,3.6c0,2,1.5,3.6,3.4,3.6C52.4,15.5,54,13.9,54,11.9z" data-reactid="15"></path><path fill="#5A78FF" d="M59.7,2c0-1.1,0.9-2,2-2c1.1,0,2,0.9,2,2c0,1.1-0.9,2-2,2C60.6,4,59.7,3,59.7,2z M59.8,17.9V5.9c0-0.3,0.2-0.5,0.5-0.5h2.6c0.3,0,0.5,0.2,0.5,0.5v12.1c0,0.3-0.2,0.5-0.5,0.5h-2.6C60,18.4,59.8,18.2,59.8,17.9z" data-reactid="16"></path><path fill="#5A78FF" d="M66.3,14V1.2c0-0.3,0.2-0.5,0.5-0.5h2.6c0.3,0,0.5,0.2,0.5,0.5v12.8c0,0.8,0.4,1.4,1.3,1.4c0.3,0,0.5,0.2,0.5,0.5v2.1c0,0.3-0.2,0.5-0.5,0.5C67.6,18.6,66.3,17.4,66.3,14z" data-reactid="17"></path><path fill="#5A78FF" d="M72.5,12c0-4,2.9-6.9,6.8-6.9c3.9,0,6.7,3,6.7,7c0,0.5-0.1,0.9-0.6,0.9h-8.9c-0.2,0-0.3,0.1-0.3,0.3c0.2,1.5,1.5,2.6,3.2,2.6c1.1,0,1.9-0.5,2.5-1.1c0.3-0.3,0.5-0.4,0.8-0.4h2.4c0.4,0,0.6,0.3,0.4,0.7c-0.9,2.2-3.3,3.8-6.2,3.8C75.3,18.8,72.5,15.9,72.5,12z M82,10.8c0.2,0,0.3-0.1,0.2-0.3C82,9.1,80.8,8,79.3,8c-1.4,0-2.6,1-3,2.4c-0.1,0.2,0,0.4,0.2,0.4H82z" data-reactid="18"></path><path fill="#5A78FF" d="M88.2,17.9V1.2c0-0.3,0.2-0.5,0.5-0.5h8.2c3.7,0,6.3,2.2,6.3,5.9c0,3.6-2.9,5.9-6.5,5.9h-4.3c-0.3,0-0.5,0.2-0.5,0.5v4.9c0,0.3-0.2,0.5-0.5,0.5h-2.7C88.4,18.4,88.2,18.2,88.2,17.9z M96.7,9.5c1.8,0,2.8-1.5,2.8-2.9c0-1.4-1-2.8-2.8-2.8h-4.4c-0.3,0-0.4,0.2-0.4,0.5V9c0,0.3,0.1,0.5,0.4,0.5H96.7z" data-reactid="19"></path><path fill="#5A78FF" d="M104.4,11.9c0-4,3-6.9,6.4-6.9c1.5,0,2.5,0.6,3.5,1.3c0.2,0.2,0.5,0.2,0.5-0.1V5.9c0-0.3,0.2-0.5,0.5-0.5h2.4c0.3,0,0.5,0.2,0.5,0.5v8.6c0,0.7,0.2,0.9,0.7,1c0.2,0,0.4,0.2,0.4,0.4v2.3c0,0.2-0.2,0.4-0.4,0.4c-1.7,0-2.7-0.5-3.3-1.5c-0.2-0.3-0.3-0.3-0.6-0.1c-1,1-2.2,1.7-4.2,1.7C107.3,18.8,104.4,15.8,104.4,11.9z M114.8,11.9c0-2.1-1.5-3.6-3.4-3.6c-1.9,0-3.4,1.6-3.4,3.6c0,2,1.5,3.6,3.4,3.6C113.3,15.5,114.8,13.9,114.8,11.9z" data-reactid="20"></path><path fill="#5A78FF" d="M120.5,23v-2.1c0-0.3,0.2-0.5,0.5-0.5c1.7,0,3.4-0.9,3.7-2.5c0.1-0.4,0.1-0.7-0.1-1l-4.8-10.8c-0.2-0.4,0.1-0.7,0.4-0.7h2.6c0.3,0,0.4,0.2,0.5,0.5l3,6.9c0.2,0.5,0.5,0.5,0.8,0l2.9-6.9c0.1-0.3,0.2-0.4,0.5-0.4h2.5c0.3,0,0.6,0.3,0.4,0.6l-4.9,11.7c-1.8,4.2-3.7,5.8-7.5,5.8C120.8,23.5,120.5,23.3,120.5,23z" data-reactid="21"></path></g></svg></a></div></div><div class="menuOptions--3Jwgd" data-reactid="22"><nav class="menu--fgBvU" data-reactid="23"><ul data-reactid="24"><li class="" data-reactid="25"><a href="/privat" target="" data-reactid="26"></a></li><li class="" data-reactid="27"><a href="/erhverv" target="" data-reactid="28"></a></li><li class="" data-reactid="29"><a href="/nyheder" target="" data-reactid="30"></a></li><li class="" data-reactid="31"><a href="/hjaelp" target="" data-reactid="32"></a></li><li class="" data-reactid="33"><a href="/presse" target="" data-reactid="34"></a></li><li class="" data-reactid="35"><a href="https://developer.mobilepay.dk/" target="" data-reactid="36"></a></li></ul><div class="search--3GP9R" data-reactid="37"><a href="/soeg" data-reactid="38"><svg style="display:inline-block;vertical-align:middle;" class="searchIcon--eMYUA" viewBox="0 0 1024 1024" data-reactid="39"><path d="M128.35 449.221c0-175.782 145.090-320.872 320.872-320.872s320.872 145.090 320.872 320.872c0 175.782-145.090 320.872-320.872 320.872-178.573 0-320.872-142.299-320.872-320.872zM1012.84 945.875l-217.635-217.635c-11.16-11.16-11.16-27.902-2.791-41.853 55.803-83.705 86.496-186.943 69.754-295.761-27.902-184.152-175.782-329.243-359.934-354.355-270.649-33.483-502.234 195.314-465.961 465.961 22.321 184.152 170.201 332.032 351.564 357.145 111.607 16.741 214.844-13.951 295.761-69.754 13.951-8.37 30.692-8.37 41.853 2.791l217.635 217.635c11.16 11.16 33.483 11.16 44.643 0l22.321-22.321c13.951-8.37 13.951-27.902 2.791-41.853z" data-reactid="40"></path></svg></a></div></nav><div class="hamburger--c8FwC" data-reactid="41"><span data-reactid="42"></span><span data-reactid="43"></span><span data-reactid="44"></span></div><placeholder data-reactid="45"><div data-reactid="46"><div id="react_H6PZdFEKhEeZV3jooLXwg"><div class="profileWrapper--2Ut8b" data-reactroot="" data-reactid="1" data-react-checksum="-1419506156"><div data-reactid="2"><p class="bold--3I2ZU profilLogin--1VFCg" data-reactid="3"></p></div><div class="tooltip--xiWtk overlay--x_mnA" name="root" data-reactid="4"><div class="tooltip-arrow--2-oQ3" name="arrow" data-reactid="5"></div><div class="tooltip-inner--3pTTE" name="box" data-reactid="6"><ul class="options--2XlHk" data-reactid="7"><li data-reactid="8"><a href="https://admin.mobilepay.dk" target="_blank" data-reactid="9"></a></li><li data-reactid="10"><a href="/partner-portal" target="" data-reactid="11"></a></li><li data-reactid="12"><a href="https://danskebank.dk/erhverv/find-hjaelp?n-login=bbmobilepay" target="_blank" data-reactid="13"></a></li></ul></div></div></div></div></div></placeholder></div></div></div></div></div><div class="overlay--33maU" name="root" data-reactid="47"><div class="overlayBg--22p36" name="bg" data-reactid="48"></div><div class="overlay-header--EKhMF" name="header" data-reactid="49"><div class="container--1F9cV" data-reactid="50"><div class="row--1OhYW" data-reactid="51"><div class="col--3a52h xlarge-10--dnGTH xxlarge-8--3Y9U0 xlarge-center--2PNbF" data-reactid="52"><div class="overlay-close--U5R3C" data-reactid="53"><!-- react-empty: 54 --></div></div></div></div></div><div class="wrapper--2Ixu5 content--1LoRi" data-reactid="55"><div class="content--SLp_e" data-reactid="56"><div class="nav--2bYon" data-reactid="57"><div class="container--1F9cV" data-reactid="58"><div class="row--1OhYW" data-reactid="59"><div class="col--3a52h xlarge-10--dnGTH xxlarge-8--3Y9U0 xlarge-center--2PNbF" data-reactid="60"><ul class="navList--1-32q" name="list" data-reactid="61"><li class="" data-reactid="62"><a href="/privat" data-reactid="63"></a></li><li class="" data-reactid="64"><a href="/erhverv" data-reactid="65"></a></li><li class="" data-reactid="66"><a href="/nyheder" data-reactid="67"></a></li><li class="" data-reactid="68"><a href="/hjaelp" data-reactid="69"></a></li><li class="" data-reactid="70"><a href="/presse" data-reactid="71"></a></li><li class="" data-reactid="72"><a href="https://developer.mobilepay.dk/" data-reactid="73">Udvikler</a></li><li class="searchBar--1JUQo" data-reactid="74"><div class="searchBar--1k_mD" data-reactid="75"><form data-reactid="76"><div role="combobox" aria-haspopup="listbox" aria-owns="react-autowhatever-1" aria-expanded="false" class="input-wrapper--37KIJ" data-reactid="77"><div class="inner--3ph9U" data-reactid="78"><input type="text" value="" autocomplete="off" aria-autocomplete="list" aria-controls="react-autowhatever-1" class="input--1-8rH" placeholder="SÃ¸g" data-reactid="79"/><button class="button--1azM_" type="submit" data-reactid="80"><div class="buttonIcons--39dJc" data-reactid="81"><svg style="display:inline-block;vertical-align:middle;" class="buttonIcon--vZPbR" viewBox="0 0 1024 1024" data-reactid="82"><path d="M128.35 449.221c0-175.782 145.090-320.872 320.872-320.872s320.872 145.090 320.872 320.872c0 175.782-145.090 320.872-320.872 320.872-178.573 0-320.872-142.299-320.872-320.872zM1012.84 945.875l-217.635-217.635c-11.16-11.16-11.16-27.902-2.791-41.853 55.803-83.705 86.496-186.943 69.754-295.761-27.902-184.152-175.782-329.243-359.934-354.355-270.649-33.483-502.234 195.314-465.961 465.961 22.321 184.152 170.201 332.032 351.564 357.145 111.607 16.741 214.844-13.951 295.761-69.754 13.951-8.37 30.692-8.37 41.853 2.791l217.635 217.635c11.16 11.16 33.483 11.16 44.643 0l22.321-22.321c13.951-8.37 13.951-27.902 2.791-41.853z" data-reactid="83"></path></svg></div></button></div><div id="react-autowhatever-1" role="listbox" class="autocompleteContainer--3GR18" data-reactid="84"></div></div></form></div></li></ul></div></div></div></div></div></div></div></div></div>


<div class="content">
  <div class="container">
    <table class="table">
      <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Name</th>
      <th scope="col">Balance</th>
    </tr>
  </thead>
  <tbody id="users">

  </tbody>
    </table>
  </div>
</div>

  <script>
      var oldUsers = [];
      var newUsers = [];
      fetch('http://10.100.17.32:3000/user')
      .then(function(response) {
        return response.json();
      })
      .then(function(users) {
        var wrapper = document.getElementById('users');

        users.forEach((user) => {
          newUsers.push(user);
          var userRow = createUserRow(user);
          wrapper.appendChild(userRow);
        });

        oldUsers = newUsers;
        localStorage.clear();
        localStorage.setItem("oldUsers", JSON.stringify(oldUsers));
      });

      function createUserRow(user) {
        var userRow = document.createElement("tr");

        var id = document.createElement("th");
        id.innerHTML = user._id;
        userRow.appendChild(id);
        var name = document.createElement("th");
        name.innerHTML = user.name;
        userRow.appendChild(name);
        var balance = document.createElement("th");
        balance.setAttribute("id", "balance");
        balance.innerHTML = user.balance;
        userRow.appendChild(balance);

        var result;
        if ((result = hasBalanceChanged(user)) != 0) {
          changeStyle(userRow, result);
        }

        return userRow;
      };

      function hasBalanceChanged(newData) {
        var oldUsers = JSON.parse(localStorage.getItem("oldUsers"));
        if (oldUsers != null) {
          var prevData = oldUsers.find((data) => newData.name === data.name);
          return (prevData && prevData.balance !== newData.balance) ? ((prevData.balance < newData.balance) ? {code: 1, oldValue: prevData.balance} : {code: -1, oldValue: prevData.balance}) : 0;
        } else return 0;
      }

      function changeStyle(row, result) {
        row.style.color = result.code > 0 ? 'green' : 'red';
        row.style.textShadow = '-0.3px 0 white, 0 0.3px white, 0.3px 0 white, 0 -0.3px white';
        var balance = row.getElementsByTagName('th')[2];
        balance.innerHTML = balance.innerHTML + " (" + result.oldValue + ")"
      }
  </script>
</body>
